# ì¹´í˜ì¸ ì¶”ì  ì•± ì„¤ê³„ ë¬¸ì„œ

## 1. í”„ë¡œì íŠ¸ ê°œìš”

### 1.1 ì„œë¹„ìŠ¤ ì•„ì´ë””ì–´

**CaffeineTracker** - ì‚¬ìš©ìì˜ ì¹´í˜ì¸ ì„­ì·¨ëŸ‰ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ì¶”ì í•˜ê³ , ê°œì¸ë³„ ê¶Œì¥ëŸ‰ì„ ê¸°ì¤€ìœ¼ë¡œ ê±´ê°•í•œ ì¹´í˜ì¸ ì„­ì·¨ë¥¼ ë„ì™€ì£¼ëŠ” ëª¨ë°”ì¼ ì•±

### 1.2 í•µì‹¬ ê¸°ëŠ¥

- ì‹¤ì‹œê°„ ì¹´í˜ì¸ ì„­ì·¨ëŸ‰ ì¶”ì 
- ê°œì¸ ë§ì¶¤í˜• ì¼ì¼ ì¹´í˜ì¸ ê¶Œì¥ëŸ‰ ê³„ì‚°
- ì¹´í˜ì¸ ë¶„í•´ ì‹œê°„ì„ ê³ ë ¤í•œ ìë™ ê°ì†Œ ì‹œìŠ¤í…œ
- ì§ê´€ì ì¸ í”„ë¡œê·¸ë˜ìŠ¤ ë°” UI
- ë‹¤ì–‘í•œ ì»¤í”¼/ìŒë£Œ ë°ì´í„°ë² ì´ìŠ¤

### 1.3 íƒ€ê²Ÿ ì‚¬ìš©ì

- ì¹´í˜ì¸ ì„­ì·¨ë¥¼ ê´€ë¦¬í•˜ê³  ì‹¶ì€ ì„±ì¸
- ê±´ê°•í•œ ìƒí™œì„ ì¶”êµ¬í•˜ëŠ” ì‚¬ëŒë“¤
- ì»¤í”¼ ì• í˜¸ê°€ë“¤

## 2. ê¸°ìˆ  ìŠ¤íƒ

### 2.1 Frontend

- **React Native (Expo)**: í¬ë¡œìŠ¤ í”Œë«í¼ ëª¨ë°”ì¼ ì•± ê°œë°œ
- **NativeWindCSS**: Tailwind CSS ê¸°ë°˜ ìŠ¤íƒ€ì¼ë§
- **Ionicons**: ì•„ì´ì½˜ ë¼ì´ë¸ŒëŸ¬ë¦¬
- **React Navigation**: í™”ë©´ ë„¤ë¹„ê²Œì´ì…˜

### 2.2 Backend & Database

- **Supabase**:
  - PostgreSQL ë°ì´í„°ë² ì´ìŠ¤
  - ì‹¤ì‹œê°„ êµ¬ë…
  - ì¸ì¦ ì‹œìŠ¤í…œ
  - REST API

### 2.3 ì¶”ê°€ ë¼ì´ë¸ŒëŸ¬ë¦¬ (ì˜ˆìƒ)

- **@supabase/supabase-js**: Supabase í´ë¼ì´ì–¸íŠ¸
- **@tanstack/react-query**: ë°ì´í„° íŒ¨ì¹­ ë° ìƒíƒœ ê´€ë¦¬
- **React Hook Form**: í¼ ê´€ë¦¬
- **@react-native-async-storage/async-storage**: ë¡œì»¬ ì €ì¥ì†Œ ë° ìºì‹±
- **expo-system-ui**: ì‹œìŠ¤í…œ UI í…Œë§ˆ ê°ì§€
- **react-native-appearance**: ì‹œìŠ¤í…œ í…Œë§ˆ ë³€ê²½ ê°ì§€
- **expo-secure-store**: ë¯¼ê°í•œ ë°ì´í„° ì•”í˜¸í™” ì €ì¥

## 3. í™˜ê²½ë³€ìˆ˜ ë° ë³´ì•ˆ ì„¤ì •

### 3.1 í™˜ê²½ë³€ìˆ˜ êµ¬ì„± (.env)

```bash
# .env.example
EXPO_PUBLIC_SUPABASE_URL=your_supabase_project_url
EXPO_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key

# ê°œë°œí™˜ê²½ìš©
EXPO_PUBLIC_APP_ENV=development

# API ê´€ë ¨
EXPO_PUBLIC_API_BASE_URL=https://your-api.supabase.co

# ìºì‹± ì„¤ì •
EXPO_PUBLIC_CACHE_DURATION=300000  # 5ë¶„ (ë°€ë¦¬ì´ˆ)
EXPO_PUBLIC_OFFLINE_CACHE_DURATION=86400000  # 24ì‹œê°„
```

### 3.2 Supabase í´ë¼ì´ì–¸íŠ¸ ì„¤ì •

```javascript
// lib/supabase.js
import { createClient } from '@supabase/supabase-js';
import * as SecureStore from 'expo-secure-store';

// í™˜ê²½ë³€ìˆ˜ ê²€ì¦
const supabaseUrl = process.env.EXPO_PUBLIC_SUPABASE_URL;
const supabaseAnonKey = process.env.EXPO_PUBLIC_SUPABASE_ANON_KEY;

if (!supabaseUrl || !supabaseAnonKey) {
  throw new Error('Supabase í™˜ê²½ë³€ìˆ˜ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
}

// SecureStore ì–´ëŒ‘í„° (í† í° ì•”í˜¸í™” ì €ì¥)
const ExpoSecureStoreAdapter = {
  getItem: (key) => {
    return SecureStore.getItemAsync(key);
  },
  setItem: (key, value) => {
    SecureStore.setItemAsync(key, value);
  },
  removeItem: (key) => {
    SecureStore.deleteItemAsync(key);
  },
};

export const supabase = createClient(supabaseUrl, supabaseAnonKey, {
  auth: {
    storage: ExpoSecureStoreAdapter,
    autoRefreshToken: true,
    persistSession: true,
    detectSessionInUrl: false,
  },
});
```

### 3.3 í™˜ê²½ë³€ìˆ˜ íƒ€ì… ì •ì˜

```typescript
// types/env.d.ts
declare module '@env' {
  export const EXPO_PUBLIC_SUPABASE_URL: string;
  export const EXPO_PUBLIC_SUPABASE_ANON_KEY: string;
  export const EXPO_PUBLIC_APP_ENV: 'development' | 'staging' | 'production';
  export const EXPO_PUBLIC_API_BASE_URL: string;
  export const EXPO_PUBLIC_CACHE_DURATION: string;
  export const EXPO_PUBLIC_OFFLINE_CACHE_DURATION: string;
}
```

## 4. ìºì‹± ì‹œìŠ¤í…œ ì„¤ê³„ (AsyncStorage)

### 4.1 React Query ì„¤ì •

```javascript
// lib/queryClient.js
import { QueryClient } from '@tanstack/react-query';
import AsyncStorage from '@react-native-async-storage/async-storage';

// React Query í´ë¼ì´ì–¸íŠ¸ ì„¤ì •
export const queryClient = new QueryClient({
  defaultOptions: {
    queries: {
      staleTime: 5 * 60 * 1000, // 5ë¶„
      cacheTime: 30 * 60 * 1000, // 30ë¶„
      retry: 2,
      retryDelay: (attemptIndex) => Math.min(1000 * 2 ** attemptIndex, 10000),
      refetchOnWindowFocus: false,
      refetchOnReconnect: true,
    },
    mutations: {
      retry: 1,
    },
  },
});
```

### 4.2 AsyncStorage ìºì‹œ í—¬í¼

```javascript
// utils/cache.js
import AsyncStorage from '@react-native-async-storage/async-storage';

const CACHE_PREFIX = 'caffeine_cache_';
const DEFAULT_TTL = 5 * 60 * 1000; // 5ë¶„

export const cache = {
  async set(key, value, ttl = DEFAULT_TTL) {
    try {
      const item = {
        value,
        timestamp: Date.now(),
        ttl,
      };
      await AsyncStorage.setItem(`${CACHE_PREFIX}${key}`, JSON.stringify(item));
    } catch (error) {
      console.warn('ìºì‹œ ì €ì¥ ì‹¤íŒ¨:', error);
    }
  },

  async get(key) {
    try {
      const item = await AsyncStorage.getItem(`${CACHE_PREFIX}${key}`);
      if (!item) return null;

      const parsed = JSON.parse(item);
      const now = Date.now();

      // TTL ì²´í¬
      if (now - parsed.timestamp > parsed.ttl) {
        await this.delete(key);
        return null;
      }

      return parsed.value;
    } catch (error) {
      console.warn('ìºì‹œ ë¡œë“œ ì‹¤íŒ¨:', error);
      return null;
    }
  },

  async delete(key) {
    try {
      await AsyncStorage.removeItem(`${CACHE_PREFIX}${key}`);
    } catch (error) {
      console.warn('ìºì‹œ ì‚­ì œ ì‹¤íŒ¨:', error);
    }
  },

  async clear() {
    try {
      const keys = await AsyncStorage.getAllKeys();
      const cacheKeys = keys.filter((key) => key.startsWith(CACHE_PREFIX));
      await AsyncStorage.multiRemove(cacheKeys);
    } catch (error) {
      console.warn('ìºì‹œ ì „ì²´ ì‚­ì œ ì‹¤íŒ¨:', error);
    }
  },
};
```

### 4.3 ë°ì´í„° íŒ¨ì¹­ í›…

```javascript
// hooks/useCaffeineData.js
import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';
import { supabase } from '../lib/supabase';
import { cache } from '../utils/cache';

export function useCaffeineData(userId) {
  return useQuery({
    queryKey: ['caffeine', userId],
    queryFn: async () => {
      // ìºì‹œëœ ë°ì´í„° ë¨¼ì € í™•ì¸
      const cached = await cache.get(`caffeine_${userId}`);
      if (cached) return cached;

      const { data, error } = await supabase
        .from('users')
        .select('current_caffeine, daily_caffeine_limit')
        .eq('id', userId)
        .single();

      if (error) throw error;

      // ìºì‹œì— ì €ì¥ (30ì´ˆ)
      await cache.set(`caffeine_${userId}`, data, 30 * 1000);
      return data;
    },
    staleTime: 30 * 1000, // 30ì´ˆ
  });
}

export function useCaffeineItems() {
  return useQuery({
    queryKey: ['caffeine-items'],
    queryFn: async () => {
      // ìºì‹œëœ ë°ì´í„° ë¨¼ì € í™•ì¸
      const cached = await cache.get('caffeine_items');
      if (cached) return cached;

      const { data, error } = await supabase
        .from('caffeine_items')
        .select('*')
        .order('display_order');

      if (error) throw error;

      // ìºì‹œì— ì €ì¥ (1ì‹œê°„)
      await cache.set('caffeine_items', data, 60 * 60 * 1000);
      return data;
    },
    staleTime: 60 * 60 * 1000, // 1ì‹œê°„
  });
}

export function useAddCaffeine() {
  const queryClient = useQueryClient();

  return useMutation({
    mutationFn: async ({ userId, itemId, caffeineAmount }) => {
      const { data, error } = await supabase
        .from('caffeine_logs')
        .insert({
          user_id: userId,
          caffeine_item_id: itemId,
          caffeine_amount: caffeineAmount,
          metabolism_complete_at: new Date(
            Date.now() + 6 * 60 * 60 * 1000 // 6ì‹œê°„ í›„
          ).toISOString(),
        })
        .select()
        .single();

      if (error) throw error;

      // ì‚¬ìš©ìì˜ í˜„ì¬ ì¹´í˜ì¸ëŸ‰ ì—…ë°ì´íŠ¸
      const { error: updateError } = await supabase
        .from('users')
        .update({
          current_caffeine: supabase.raw(
            `current_caffeine + ${caffeineAmount}`
          ),
        })
        .eq('id', userId);

      if (updateError) throw updateError;

      return data;
    },
    onSuccess: (data, variables) => {
      // ìºì‹œ ë¬´íš¨í™”
      queryClient.invalidateQueries(['caffeine', variables.userId]);
      cache.delete(`caffeine_${variables.userId}`);
    },
  });
}
```

### 4.4 ì˜¤í”„ë¼ì¸ ì§€ì›

```javascript
// hooks/useOfflineSupport.js
import { useEffect, useState } from 'react';
import NetInfo from '@react-native-community/netinfo';
import { cache } from '../utils/cache';

export function useOfflineSupport() {
  const [isOnline, setIsOnline] = useState(true);
  const [pendingActions, setPendingActions] = useState([]);

  useEffect(() => {
    const unsubscribe = NetInfo.addEventListener((state) => {
      setIsOnline(state.isConnected);

      // ì˜¨ë¼ì¸ ë³µêµ¬ ì‹œ ëŒ€ê¸° ì¤‘ì¸ ì•¡ì…˜ ì‹¤í–‰
      if (state.isConnected && pendingActions.length > 0) {
        processPendingActions();
      }
    });

    loadPendingActions();
    return unsubscribe;
  }, []);

  const loadPendingActions = async () => {
    const pending = await cache.get('pending_actions');
    if (pending) {
      setPendingActions(pending);
    }
  };

  const addPendingAction = async (action) => {
    const updated = [...pendingActions, { ...action, timestamp: Date.now() }];
    setPendingActions(updated);
    await cache.set('pending_actions', updated, 24 * 60 * 60 * 1000); // 24ì‹œê°„
  };

  const processPendingActions = async () => {
    // ëŒ€ê¸° ì¤‘ì¸ ì•¡ì…˜ë“¤ì„ ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰
    for (const action of pendingActions) {
      try {
        await executeAction(action);
      } catch (error) {
        console.warn('ì˜¤í”„ë¼ì¸ ì•¡ì…˜ ì‹¤í–‰ ì‹¤íŒ¨:', error);
      }
    }

    setPendingActions([]);
    await cache.delete('pending_actions');
  };

  return {
    isOnline,
    addPendingAction,
    pendingActions: pendingActions.length,
  };
}
```

## 5. ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ

### 5.1 Users Table

```sql
CREATE TABLE users (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  email VARCHAR(255) UNIQUE NOT NULL,
  name VARCHAR(100) NOT NULL,
  gender VARCHAR(10) CHECK (gender IN ('male', 'female', 'other')),
  age INTEGER CHECK (age >= 13 AND age <= 120),
  weight DECIMAL(5,2) CHECK (weight > 0),
  daily_caffeine_limit INTEGER DEFAULT 400, -- mg
  current_caffeine DECIMAL(6,2) DEFAULT 0, -- mg
  theme_preference VARCHAR(10) DEFAULT 'system' CHECK (theme_preference IN ('light', 'dark', 'system')),
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

### 5.2 Coffee Items Table

```sql
CREATE TABLE caffeine_items (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  category VARCHAR(20) NOT NULL CHECK (category IN ('coffee', 'energy_drink')),
  brand VARCHAR(50) NOT NULL, -- ìŠ¤íƒ€ë²…ìŠ¤, ë©”ê°€ì»¤í”¼, ì»´í¬ì¦ˆì»¤í”¼, ë¹½ë‹¤ë°©, ëª¬ìŠ¤í„°, ë ˆë“œë¶ˆ, í•«ì‹ìŠ¤
  name VARCHAR(100) NOT NULL, -- ì•„ì´ìŠ¤ ì•„ë©”ë¦¬ì¹´ë…¸, ì¹´í˜ë¼ë–¼, ëª¬ìŠ¤í„° í™”ì´íŠ¸ ë“±
  size VARCHAR(20), -- S, M, L, XL (ì»¤í”¼ë§Œ í•´ë‹¹, ì—ë„ˆì§€ ë“œë§í¬ëŠ” NULL)
  caffeine_content DECIMAL(6,2) NOT NULL, -- mg
  serving_size_ml INTEGER, -- ml
  icon_name VARCHAR(50), -- ionicon name
  display_order INTEGER DEFAULT 0, -- í‘œì‹œ ìˆœì„œ
  is_active BOOLEAN DEFAULT TRUE,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- ì¸ë±ìŠ¤ ì¶”ê°€
CREATE INDEX idx_caffeine_items_category ON caffeine_items(category);
CREATE INDEX idx_caffeine_items_brand ON caffeine_items(brand);
CREATE INDEX idx_caffeine_items_category_brand ON caffeine_items(category, brand);
```

### 5.3 ì´ˆê¸° ë°ì´í„° ì‚½ì…

```sql
-- ì»¤í”¼ ë¸Œëœë“œ ë°ì´í„°
INSERT INTO caffeine_items (category, brand, name, size, caffeine_content, serving_size_ml, icon_name, display_order) VALUES
-- ìŠ¤íƒ€ë²…ìŠ¤
('coffee', 'ìŠ¤íƒ€ë²…ìŠ¤', 'ì•„ì´ìŠ¤ ì•„ë©”ë¦¬ì¹´ë…¸', 'S', 150, 355, 'cafe-outline', 1),
('coffee', 'ìŠ¤íƒ€ë²…ìŠ¤', 'ì•„ì´ìŠ¤ ì•„ë©”ë¦¬ì¹´ë…¸', 'M', 225, 473, 'cafe-outline', 2),
('coffee', 'ìŠ¤íƒ€ë²…ìŠ¤', 'ì•„ì´ìŠ¤ ì•„ë©”ë¦¬ì¹´ë…¸', 'L', 300, 591, 'cafe-outline', 3),
('coffee', 'ìŠ¤íƒ€ë²…ìŠ¤', 'ì¹´í˜ë¼ë–¼', 'S', 75, 355, 'cafe-outline', 4),
('coffee', 'ìŠ¤íƒ€ë²…ìŠ¤', 'ì¹´í˜ë¼ë–¼', 'M', 150, 473, 'cafe-outline', 5),
('coffee', 'ìŠ¤íƒ€ë²…ìŠ¤', 'ì¹´í˜ë¼ë–¼', 'L', 225, 591, 'cafe-outline', 6),

-- ë©”ê°€ì»¤í”¼
('coffee', 'ë©”ê°€ì»¤í”¼', 'ì•„ì´ìŠ¤ ì•„ë©”ë¦¬ì¹´ë…¸', 'M', 120, 500, 'cafe-outline', 7),
('coffee', 'ë©”ê°€ì»¤í”¼', 'ì•„ì´ìŠ¤ ì•„ë©”ë¦¬ì¹´ë…¸', 'L', 180, 650, 'cafe-outline', 8),
('coffee', 'ë©”ê°€ì»¤í”¼', 'ì¹´í˜ë¼ë–¼', 'M', 80, 500, 'cafe-outline', 9),
('coffee', 'ë©”ê°€ì»¤í”¼', 'ì¹´í˜ë¼ë–¼', 'L', 120, 650, 'cafe-outline', 10),

-- ì»´í¬ì¦ˆì»¤í”¼
('coffee', 'ì»´í¬ì¦ˆì»¤í”¼', 'ì•„ì´ìŠ¤ ì•„ë©”ë¦¬ì¹´ë…¸', 'M', 115, 473, 'cafe-outline', 11),
('coffee', 'ì»´í¬ì¦ˆì»¤í”¼', 'ì•„ì´ìŠ¤ ì•„ë©”ë¦¬ì¹´ë…¸', 'L', 175, 591, 'cafe-outline', 12),
('coffee', 'ì»´í¬ì¦ˆì»¤í”¼', 'ì¹´í˜ë¼ë–¼', 'M', 75, 473, 'cafe-outline', 13),
('coffee', 'ì»´í¬ì¦ˆì»¤í”¼', 'ì¹´í˜ë¼ë–¼', 'L', 115, 591, 'cafe-outline', 14),

-- ë¹½ë‹¤ë°©
('coffee', 'ë¹½ë‹¤ë°©', 'ì•„ì´ìŠ¤ ì•„ë©”ë¦¬ì¹´ë…¸', 'M', 110, 473, 'cafe-outline', 15),
('coffee', 'ë¹½ë‹¤ë°©', 'ì•„ì´ìŠ¤ ì•„ë©”ë¦¬ì¹´ë…¸', 'L', 165, 591, 'cafe-outline', 16),
('coffee', 'ë¹½ë‹¤ë°©', 'ì¹´í˜ë¼ë–¼', 'M', 70, 473, 'cafe-outline', 17),
('coffee', 'ë¹½ë‹¤ë°©', 'ì¹´í˜ë¼ë–¼', 'L', 110, 591, 'cafe-outline', 18),

-- ì—ë„ˆì§€ ë“œë§í¬
('energy_drink', 'ëª¬ìŠ¤í„°', 'ëª¬ìŠ¤í„° ì˜¤ë¦¬ì§€ë„', NULL, 160, 355, 'flash-outline', 19),
('energy_drink', 'ëª¬ìŠ¤í„°', 'ëª¬ìŠ¤í„° í™”ì´íŠ¸', NULL, 140, 355, 'flash-outline', 20),
('energy_drink', 'ëª¬ìŠ¤í„°', 'ëª¬ìŠ¤í„° ìš¸íŠ¸ë¼', NULL, 140, 355, 'flash-outline', 21),

('energy_drink', 'ë ˆë“œë¶ˆ', 'ë ˆë“œë¶ˆ ì˜¤ë¦¬ì§€ë„', NULL, 80, 250, 'flash-outline', 22),
('energy_drink', 'ë ˆë“œë¶ˆ', 'ë ˆë“œë¶ˆ ìŠˆê°€í”„ë¦¬', NULL, 80, 250, 'flash-outline', 23),
('energy_drink', 'ë ˆë“œë¶ˆ', 'ë ˆë“œë¶ˆ ë¸”ë£¨', NULL, 80, 250, 'flash-outline', 24),

('energy_drink', 'í•«ì‹ìŠ¤', 'í•«ì‹ìŠ¤ ì˜¤ë¦¬ì§€ë„', NULL, 60, 250, 'flash-outline', 25),
('energy_drink', 'í•«ì‹ìŠ¤', 'í•«ì‹ìŠ¤ ì œë¡œ', NULL, 60, 250, 'flash-outline', 26),
('energy_drink', 'í•«ì‹ìŠ¤', 'í•«ì‹ìŠ¤ í‚¹', NULL, 120, 355, 'flash-outline', 27);
```

### 5.4 Caffeine Logs Table

```sql
CREATE TABLE caffeine_logs (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES users(id) ON DELETE CASCADE,
  caffeine_item_id UUID REFERENCES caffeine_items(id),
  caffeine_amount DECIMAL(6,2) NOT NULL, -- mg
  consumed_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  metabolism_complete_at TIMESTAMP WITH TIME ZONE, -- ì¹´í˜ì¸ ì™„ì „ ë¶„í•´ ì˜ˆìƒ ì‹œê°„
  is_active BOOLEAN DEFAULT TRUE, -- ì•„ì§ ë¶„í•´ ì¤‘ì¸ì§€ ì—¬ë¶€
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

### 5.5 User Profiles View (ê³„ì‚°ëœ ê¶Œì¥ëŸ‰)

```sql
CREATE OR REPLACE FUNCTION calculate_daily_limit(user_age INTEGER, user_weight DECIMAL, user_gender VARCHAR)
RETURNS INTEGER AS $$
BEGIN
  -- ê¸°ë³¸ ê¶Œì¥ëŸ‰: ì²´ì¤‘ 1kgë‹¹ 5-6mg, ìµœëŒ€ 400mg
  -- ë‚˜ì´ë³„ ì¡°ì •: 18ì„¸ ë¯¸ë§Œ ì œí•œ, 65ì„¸ ì´ìƒ ê°ì†Œ
  -- ì„±ë³„ë³„ ì¡°ì •: ì—¬ì„±ì˜ ê²½ìš° ì•½ê°„ ê°ì†Œ

  DECLARE
    base_limit INTEGER;
    age_factor DECIMAL := 1.0;
    gender_factor DECIMAL := 1.0;
  BEGIN
    -- ì²´ì¤‘ ê¸°ë°˜ ê³„ì‚°
    base_limit := LEAST(user_weight * 5.5, 400);

    -- ë‚˜ì´ ì¡°ì •
    IF user_age < 18 THEN
      age_factor := 0.5;
    ELSIF user_age > 65 THEN
      age_factor := 0.8;
    END IF;

    -- ì„±ë³„ ì¡°ì •
    IF user_gender = 'female' THEN
      gender_factor := 0.9;
    END IF;

    RETURN ROUND(base_limit * age_factor * gender_factor);
  END;
END;
$$ LANGUAGE plpgsql;
```

## 6. ì•± êµ¬ì¡° ì„¤ê³„

### 6.1 í™”ë©´ êµ¬ì„±

```
App
â”œâ”€â”€ AuthStack
â”‚   â”œâ”€â”€ LoginScreen
â”‚   â”œâ”€â”€ SignUpScreen
â”‚   â””â”€â”€ ForgotPasswordScreen
â”œâ”€â”€ MainStack
â”‚   â”œâ”€â”€ HomeScreen (ë©”ì¸ ëŒ€ì‹œë³´ë“œ)
â”‚   â”œâ”€â”€ CaffeineSelectionScreen (ê³„ì¸µì  ì¹´í˜ì¸ ì„ íƒ)
â”‚   â”œâ”€â”€ ProfileScreen (í”„ë¡œí•„ ìˆ˜ì •)
â”‚   â”œâ”€â”€ HistoryScreen (ì„­ì·¨ ê¸°ë¡)
â”‚   â””â”€â”€ SettingsScreen
```

### 6.2 ì£¼ìš” ì»´í¬ë„ŒíŠ¸

- **CaffeineProgressBar**: í˜„ì¬ ì„­ì·¨ëŸ‰ ì‹œê°í™”
- **CaffeineHierarchySelector**: ê³„ì¸µì  ì¹´í˜ì¸ ì„ íƒ ì»´í¬ë„ŒíŠ¸
- **CategoryButton**: ì¹´í…Œê³ ë¦¬ ì„ íƒ ë²„íŠ¼ (ì»¤í”¼/ì—ë„ˆì§€ ë“œë§í¬)
- **BrandButton**: ë¸Œëœë“œ ì„ íƒ ë²„íŠ¼
- **DrinkButton**: ìŒë£Œ ì„ íƒ ë²„íŠ¼
- **SizeButton**: ì‚¬ì´ì¦ˆ ì„ íƒ ë²„íŠ¼ (ì»¤í”¼ë§Œ)
- **ProfileForm**: ì‚¬ìš©ì ì •ë³´ ì…ë ¥ í¼
- **CaffeineChart**: ì¼ë³„/ì£¼ë³„ ì„­ì·¨ëŸ‰ ì°¨íŠ¸
- **ThemeProvider**: í…Œë§ˆ ì»¨í…ìŠ¤íŠ¸ ì œê³µì
- **ThemeToggle**: í…Œë§ˆ ì „í™˜ ë²„íŠ¼
- **ThemedView/ThemedText**: í…Œë§ˆ ì ìš© ê¸°ë³¸ ì»´í¬ë„ŒíŠ¸

### 6.3 ê³„ì¸µì  ì„ íƒ ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°

```javascript
// components/CaffeineHierarchySelector.js
import React, { useState } from 'react';
import { View, ScrollView } from 'react-native';
import { CategoryButton } from './CategoryButton';
import { BrandButton } from './BrandButton';
import { DrinkButton } from './DrinkButton';
import { SizeButton } from './SizeButton';

export function CaffeineHierarchySelector({ onSelect }) {
  const [selectedCategory, setSelectedCategory] = useState(null);
  const [selectedBrand, setSelectedBrand] = useState(null);
  const [selectedDrink, setSelectedDrink] = useState(null);
  const [selectedSize, setSelectedSize] = useState(null);

  const categories = [
    { id: 'coffee', name: 'ì»¤í”¼', icon: 'cafe-outline' },
    { id: 'energy_drink', name: 'ì—ë„ˆì§€ ë“œë§í¬', icon: 'flash-outline' },
  ];

  const brands = {
    coffee: [
      { id: 'starbucks', name: 'ìŠ¤íƒ€ë²…ìŠ¤', icon: 'storefront-outline' },
      { id: 'mega', name: 'ë©”ê°€ì»¤í”¼', icon: 'storefront-outline' },
      { id: 'compose', name: 'ì»´í¬ì¦ˆì»¤í”¼', icon: 'storefront-outline' },
      { id: 'paik', name: 'ë¹½ë‹¤ë°©', icon: 'storefront-outline' },
    ],
    energy_drink: [
      { id: 'monster', name: 'ëª¬ìŠ¤í„°', icon: 'flash-outline' },
      { id: 'redbull', name: 'ë ˆë“œë¶ˆ', icon: 'flash-outline' },
      { id: 'hotsix', name: 'í•«ì‹ìŠ¤', icon: 'flash-outline' },
    ],
  };

  const drinks = {
    coffee: [
      { id: 'americano', name: 'ì•„ì´ìŠ¤ ì•„ë©”ë¦¬ì¹´ë…¸', icon: 'cafe-outline' },
      { id: 'latte', name: 'ì¹´í˜ë¼ë–¼', icon: 'cafe-outline' },
    ],
    energy_drink: {
      monster: [
        { id: 'original', name: 'ëª¬ìŠ¤í„° ì˜¤ë¦¬ì§€ë„', caffeine: 160 },
        { id: 'white', name: 'ëª¬ìŠ¤í„° í™”ì´íŠ¸', caffeine: 140 },
        { id: 'ultra', name: 'ëª¬ìŠ¤í„° ìš¸íŠ¸ë¼', caffeine: 140 },
      ],
      redbull: [
        { id: 'original', name: 'ë ˆë“œë¶ˆ ì˜¤ë¦¬ì§€ë„', caffeine: 80 },
        { id: 'sugar_free', name: 'ë ˆë“œë¶ˆ ìŠˆê°€í”„ë¦¬', caffeine: 80 },
        { id: 'blue', name: 'ë ˆë“œë¶ˆ ë¸”ë£¨', caffeine: 80 },
      ],
      hotsix: [
        { id: 'original', name: 'í•«ì‹ìŠ¤ ì˜¤ë¦¬ì§€ë„', caffeine: 60 },
        { id: 'zero', name: 'í•«ì‹ìŠ¤ ì œë¡œ', caffeine: 60 },
        { id: 'king', name: 'í•«ì‹ìŠ¤ í‚¹', caffeine: 120 },
      ],
    },
  };

  const sizes = [
    { id: 'S', name: 'Small', multiplier: 1.0 },
    { id: 'M', name: 'Medium', multiplier: 1.5 },
    { id: 'L', name: 'Large', multiplier: 2.0 },
  ];

  const resetSelection = (level) => {
    if (level <= 1) setSelectedBrand(null);
    if (level <= 2) setSelectedDrink(null);
    if (level <= 3) setSelectedSize(null);
  };

  const handleCategorySelect = (category) => {
    setSelectedCategory(category);
    resetSelection(1);
  };

  const handleBrandSelect = (brand) => {
    setSelectedBrand(brand);
    resetSelection(2);
  };

  const handleDrinkSelect = (drink) => {
    setSelectedDrink(drink);
    resetSelection(3);

    // ì—ë„ˆì§€ ë“œë§í¬ëŠ” ì‚¬ì´ì¦ˆê°€ ì—†ìœ¼ë¯€ë¡œ ë°”ë¡œ ì™„ë£Œ
    if (selectedCategory === 'energy_drink') {
      onSelect({
        category: selectedCategory,
        brand: selectedBrand,
        drink: drink,
        caffeine: drink.caffeine,
      });
    }
  };

  const handleSizeSelect = (size) => {
    setSelectedSize(size);

    // ì»¤í”¼ ì„ íƒ ì™„ë£Œ
    onSelect({
      category: selectedCategory,
      brand: selectedBrand,
      drink: selectedDrink,
      size: size,
      caffeine: calculateCoffeCaffeine(
        selectedBrand,
        selectedDrink.id,
        size.id
      ),
    });
  };

  return (
    <ScrollView className="flex-1 p-4">
      {/* 1ë‹¨ê³„: ì¹´í…Œê³ ë¦¬ ì„ íƒ */}
      <View className="mb-6">
        <ThemedText className="text-lg font-bold mb-3">
          ì¹´í…Œê³ ë¦¬ ì„ íƒ
        </ThemedText>
        <View className="flex-row space-x-3">
          {categories.map((category) => (
            <CategoryButton
              key={category.id}
              category={category}
              isSelected={selectedCategory === category.id}
              onPress={() => handleCategorySelect(category.id)}
            />
          ))}
        </View>
      </View>

      {/* 2ë‹¨ê³„: ë¸Œëœë“œ ì„ íƒ */}
      {selectedCategory && (
        <View className="mb-6">
          <ThemedText className="text-lg font-bold mb-3">
            ë¸Œëœë“œ ì„ íƒ
          </ThemedText>
          <View className="flex-row flex-wrap">
            {brands[selectedCategory].map((brand) => (
              <BrandButton
                key={brand.id}
                brand={brand}
                isSelected={selectedBrand === brand.id}
                onPress={() => handleBrandSelect(brand.id)}
              />
            ))}
          </View>
        </View>
      )}

      {/* 3ë‹¨ê³„: ìŒë£Œ ì„ íƒ */}
      {selectedBrand && (
        <View className="mb-6">
          <ThemedText className="text-lg font-bold mb-3">ìŒë£Œ ì„ íƒ</ThemedText>
          <View className="space-y-2">
            {(selectedCategory === 'coffee'
              ? drinks.coffee
              : drinks.energy_drink[selectedBrand]
            ).map((drink) => (
              <DrinkButton
                key={drink.id}
                drink={drink}
                isSelected={selectedDrink?.id === drink.id}
                onPress={() => handleDrinkSelect(drink)}
              />
            ))}
          </View>
        </View>
      )}

      {/* 4ë‹¨ê³„: ì‚¬ì´ì¦ˆ ì„ íƒ (ì»¤í”¼ë§Œ) */}
      {selectedDrink && selectedCategory === 'coffee' && (
        <View className="mb-6">
          <ThemedText className="text-lg font-bold mb-3">
            ì‚¬ì´ì¦ˆ ì„ íƒ
          </ThemedText>
          <View className="flex-row space-x-3">
            {sizes.map((size) => (
              <SizeButton
                key={size.id}
                size={size}
                isSelected={selectedSize?.id === size.id}
                onPress={() => handleSizeSelect(size)}
              />
            ))}
          </View>
        </View>
      )}
    </ScrollView>
  );
}

function calculateCoffeCaffeine(brand, drink, size) {
  // ë¸Œëœë“œë³„, ìŒë£Œë³„, ì‚¬ì´ì¦ˆë³„ ì¹´í˜ì¸ ê³„ì‚° ë¡œì§
  const baseCaffeine = {
    starbucks: {
      americano: { S: 150, M: 225, L: 300 },
      latte: { S: 75, M: 150, L: 225 },
    },
    mega: { americano: { M: 120, L: 180 }, latte: { M: 80, L: 120 } },
    compose: { americano: { M: 115, L: 175 }, latte: { M: 75, L: 115 } },
    paik: { americano: { M: 110, L: 165 }, latte: { M: 70, L: 110 } },
  };

  return baseCaffeine[brand]?.[drink]?.[size] || 0;
}
```

## 7. ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§

### 7.1 ì¹´í˜ì¸ ë¶„í•´ ì‹œìŠ¤í…œ

```javascript
// ì¹´í˜ì¸ ë°˜ê°ê¸°: ì•½ 5-6ì‹œê°„
const CAFFEINE_HALF_LIFE = 5.5; // hours

function calculateRemainingCaffeine(initialAmount, hoursElapsed) {
  return initialAmount * Math.pow(0.5, hoursElapsed / CAFFEINE_HALF_LIFE);
}

function updateUserCaffeine(userId) {
  // í™œì„± ë¡œê·¸ë“¤ì˜ í˜„ì¬ ì¹´í˜ì¸ëŸ‰ ê³„ì‚° í›„ ì—…ë°ì´íŠ¸
  // 10mg ì´í•˜ì¼ ë•Œ ë¡œê·¸ë¥¼ ë¹„í™œì„±í™”
}
```

### 7.2 ì¼ì¼ ê¶Œì¥ëŸ‰ ê³„ì‚°

```javascript
function calculateDailyLimit(age, weight, gender) {
  let baseLimit = Math.min(weight * 5.5, 400);

  // ë‚˜ì´ ì¡°ì •
  if (age < 18) baseLimit *= 0.5;
  else if (age > 65) baseLimit *= 0.8;

  // ì„±ë³„ ì¡°ì •
  if (gender === 'female') baseLimit *= 0.9;

  return Math.round(baseLimit);
}
```

## 8. í…Œë§ˆ ì‹œìŠ¤í…œ ì„¤ê³„

### 8.1 í…Œë§ˆ êµ¬ì¡°

```javascript
// theme/colors.js
export const colors = {
  light: {
    primary: '#8B5CF6', // ë³´ë¼ìƒ‰
    secondary: '#06B6D4', // ì²­ë¡ìƒ‰
    background: '#FFFFFF',
    surface: '#F8FAFC',
    card: '#FFFFFF',
    text: '#1F2937',
    textSecondary: '#6B7280',
    border: '#E5E7EB',
    error: '#EF4444',
    success: '#10B981',
    warning: '#F59E0B',
    caffeine: '#8B4513', // ì¹´í˜ì¸ ê´€ë ¨ ë¸Œë¼ìš´
    progressBg: '#E5E7EB',
    progressFill: '#8B5CF6',
  },
  dark: {
    primary: '#A78BFA', // ë°ì€ ë³´ë¼ìƒ‰
    secondary: '#22D3EE', // ë°ì€ ì²­ë¡ìƒ‰
    background: '#111827',
    surface: '#1F2937',
    card: '#374151',
    text: '#F9FAFB',
    textSecondary: '#D1D5DB',
    border: '#4B5563',
    error: '#F87171',
    success: '#34D399',
    warning: '#FBBF24',
    caffeine: '#D2691E', // ë°ì€ ë¸Œë¼ìš´
    progressBg: '#4B5563',
    progressFill: '#A78BFA',
  },
};
```

### 8.2 NativeWindCSS ë‹¤í¬ëª¨ë“œ ì„¤ì •

```javascript
// tailwind.config.js
module.exports = {
  content: ['./App.{js,jsx,ts,tsx}', './src/**/*.{js,jsx,ts,tsx}'],
  darkMode: 'class', // í´ë˜ìŠ¤ ê¸°ë°˜ ë‹¤í¬ëª¨ë“œ
  theme: {
    extend: {
      colors: {
        primary: {
          50: '#F5F3FF',
          500: '#8B5CF6',
          600: '#7C3AED',
          700: '#6D28D9',
        },
        caffeine: {
          light: '#8B4513',
          dark: '#D2691E',
        },
      },
    },
  },
  plugins: [],
};
```

### 8.3 í…Œë§ˆ ì»¨í…ìŠ¤íŠ¸

```javascript
// context/ThemeContext.js
import React, { createContext, useContext, useEffect, useState } from 'react';
import { Appearance } from 'react-native';
import AsyncStorage from '@react-native-async-storage/async-storage';

const ThemeContext = createContext();

export function ThemeProvider({ children }) {
  const [theme, setTheme] = useState('system');
  const [isDark, setIsDark] = useState(false);

  useEffect(() => {
    loadThemePreference();

    const subscription = Appearance.addChangeListener(({ colorScheme }) => {
      if (theme === 'system') {
        setIsDark(colorScheme === 'dark');
      }
    });

    return () => subscription?.remove();
  }, [theme]);

  const loadThemePreference = async () => {
    try {
      const savedTheme = await AsyncStorage.getItem('theme_preference');
      if (savedTheme) {
        setTheme(savedTheme);
        updateTheme(savedTheme);
      } else {
        updateTheme('system');
      }
    } catch (error) {
      console.error('í…Œë§ˆ ë¡œë“œ ì‹¤íŒ¨:', error);
    }
  };

  const updateTheme = (newTheme) => {
    setTheme(newTheme);

    if (newTheme === 'system') {
      const systemTheme = Appearance.getColorScheme();
      setIsDark(systemTheme === 'dark');
    } else {
      setIsDark(newTheme === 'dark');
    }
  };

  const changeTheme = async (newTheme) => {
    try {
      await AsyncStorage.setItem('theme_preference', newTheme);
      updateTheme(newTheme);

      // Supabaseì—ë„ ì €ì¥
      if (user) {
        await supabase
          .from('users')
          .update({ theme_preference: newTheme })
          .eq('id', user.id);
      }
    } catch (error) {
      console.error('í…Œë§ˆ ì €ì¥ ì‹¤íŒ¨:', error);
    }
  };

  return (
    <ThemeContext.Provider
      value={{
        theme,
        isDark,
        changeTheme,
        colors: colors[isDark ? 'dark' : 'light'],
      }}
    >
      {children}
    </ThemeContext.Provider>
  );
}

export const useTheme = () => {
  const context = useContext(ThemeContext);
  if (!context) {
    throw new Error('useTheme must be used within ThemeProvider');
  }
  return context;
};
```

### 8.4 í…Œë§ˆ ì ìš© ì»´í¬ë„ŒíŠ¸

```javascript
// components/themed/ThemedView.js
import React from 'react';
import { View } from 'react-native';
import { useTheme } from '../../context/ThemeContext';

export function ThemedView({ className, style, ...props }) {
  const { isDark } = useTheme();

  const themeClass = isDark ? 'dark' : '';
  const combinedClassName = `${themeClass} ${className || ''}`;

  return <View className={combinedClassName} style={style} {...props} />;
}

// components/themed/ThemedText.js
import React from 'react';
import { Text } from 'react-native';
import { useTheme } from '../../context/ThemeContext';

export function ThemedText({ className, style, ...props }) {
  const { colors } = useTheme();

  return (
    <Text
      className={className}
      style={[{ color: colors.text }, style]}
      {...props}
    />
  );
}
```

### 8.5 í…Œë§ˆ í† ê¸€ ì»´í¬ë„ŒíŠ¸

```javascript
// components/ThemeToggle.js
import React from 'react';
import { TouchableOpacity, View } from 'react-native';
import { Ionicons } from '@expo/vector-icons';
import { useTheme } from '../context/ThemeContext';
import { ThemedText } from './themed/ThemedText';

export function ThemeToggle() {
  const { theme, isDark, changeTheme, colors } = useTheme();

  const themeOptions = [
    { key: 'light', label: 'ë¼ì´íŠ¸', icon: 'sunny-outline' },
    { key: 'dark', label: 'ë‹¤í¬', icon: 'moon-outline' },
    { key: 'system', label: 'ì‹œìŠ¤í…œ', icon: 'phone-portrait-outline' },
  ];

  return (
    <View className="bg-white dark:bg-gray-800 rounded-xl p-4 mx-4 mb-4">
      <ThemedText className="text-lg font-semibold mb-3">í…Œë§ˆ ì„¤ì •</ThemedText>

      <View className="flex-row justify-between">
        {themeOptions.map((option) => (
          <TouchableOpacity
            key={option.key}
            onPress={() => changeTheme(option.key)}
            className={`
              flex-1 mx-1 p-3 rounded-lg items-center
              ${
                theme === option.key
                  ? 'bg-purple-500 dark:bg-purple-600'
                  : 'bg-gray-100 dark:bg-gray-700'
              }
            `}
          >
            <Ionicons
              name={option.icon}
              size={24}
              color={theme === option.key ? '#FFFFFF' : colors.text}
            />
            <ThemedText
              className={`
                mt-1 text-sm font-medium
                ${theme === option.key ? 'text-white' : ''}
              `}
            >
              {option.label}
            </ThemedText>
          </TouchableOpacity>
        ))}
      </View>
    </View>
  );
}
```

## 9. API ì„¤ê³„

### 9.1 ì£¼ìš” API ì—”ë“œí¬ì¸íŠ¸

- `GET /api/user/profile` - ì‚¬ìš©ì í”„ë¡œí•„ ì¡°íšŒ
- `PUT /api/user/profile` - ì‚¬ìš©ì í”„ë¡œí•„ ì—…ë°ì´íŠ¸
- `PUT /api/user/theme` - ì‚¬ìš©ì í…Œë§ˆ ì„¤ì • ì—…ë°ì´íŠ¸
- `GET /api/user/current-caffeine` - í˜„ì¬ ì¹´í˜ì¸ ìˆ˜ì¹˜
- `POST /api/caffeine/consume` - ì¹´í˜ì¸ ì„­ì·¨ ê¸°ë¡
- `GET /api/caffeine-items` - ì¹´í˜ì¸ ì•„ì´í…œ ëª©ë¡ (ì¹´í…Œê³ ë¦¬ë³„, ë¸Œëœë“œë³„)
- `GET /api/caffeine-items/category/:category` - ì¹´í…Œê³ ë¦¬ë³„ ì•„ì´í…œ
- `GET /api/caffeine-items/brand/:brand` - ë¸Œëœë“œë³„ ì•„ì´í…œ
- `GET /api/caffeine/history` - ì„­ì·¨ ê¸°ë¡

### 9.2 ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸

```javascript
// Supabase ì‹¤ì‹œê°„ êµ¬ë…
const subscription = supabase
  .channel('caffeine_updates')
  .on(
    'postgres_changes',
    { event: 'UPDATE', schema: 'public', table: 'users' },
    (payload) => {
      // UI ì—…ë°ì´íŠ¸
    }
  )
  .subscribe();
```

## 10. ì„±ëŠ¥ ìµœì í™” ì „ëµ

### 10.1 AsyncStorage ìºì‹± ì „ëµ

```javascript
// ê°„ë‹¨í•œ ìºì‹± ì‹œìŠ¤í…œ
export const cacheStrategy = {
  // ì‹¤ì‹œê°„ ë°ì´í„° (ì¹´í˜ì¸ ìˆ˜ì¹˜)
  realtime: {
    ttl: 30 * 1000, // 30ì´ˆ
    key: 'caffeine_data',
  },

  // ì¤€ì •ì  ë°ì´í„° (ì‚¬ìš©ì í”„ë¡œí•„)
  semiStatic: {
    ttl: 5 * 60 * 1000, // 5ë¶„
    key: 'user_profile',
  },

  // ì •ì  ë°ì´í„° (ì¹´í˜ì¸ ì•„ì´í…œ ëª©ë¡)
  static: {
    ttl: 60 * 60 * 1000, // 1ì‹œê°„
    key: 'caffeine_items',
  },
};
```

### 10.2 ì»´í¬ë„ŒíŠ¸ ìµœì í™”

```javascript
// React.memoë¡œ ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§ ë°©ì§€
import React, { memo } from 'react';

export const CategoryButton = memo(({ category, isSelected, onPress }) => {
  return (
    <TouchableOpacity
      className={`
        flex-1 p-4 rounded-xl items-center
        ${isSelected ? 'bg-purple-500' : 'bg-gray-100 dark:bg-gray-800'}
      `}
      onPress={onPress}
    >
      <Ionicons
        name={category.icon}
        size={32}
        color={isSelected ? '#FFFFFF' : '#6B7280'}
      />
      <ThemedText
        className={`mt-2 font-medium ${isSelected ? 'text-white' : ''}`}
      >
        {category.name}
      </ThemedText>
    </TouchableOpacity>
  );
});

// useMemoë¡œ ê³„ì‚° ë¹„ìš©ì´ ë†’ì€ ì—°ì‚° ìµœì í™”
const filteredItems = useMemo(() => {
  return caffeineItems.filter(
    (item) => item.category === selectedCategory && item.brand === selectedBrand
  );
}, [caffeineItems, selectedCategory, selectedBrand]);
```

### 10.3 ë²ˆë“¤ í¬ê¸° ìµœì í™”

```javascript
// metro.config.js
const { getDefaultConfig } = require('@expo/metro-config');

const config = getDefaultConfig(__dirname);

// ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ëª¨ë“ˆ ì œê±°
config.resolver.platforms = ['ios', 'android', 'native', 'web'];

module.exports = config;
```

## 11. ê°œë°œ ë‹¨ê³„

### Phase 1: ê¸°ë³¸ ê¸°ëŠ¥ (MVP)

- [ ] í™˜ê²½ë³€ìˆ˜ ì„¤ì • ë° Supabase ì—°ê²°
- [ ] ì‚¬ìš©ì ì¸ì¦ (SecureStore ì•”í˜¸í™”)
- [ ] AsyncStorage ê¸°ë°˜ ìºì‹± ì‹œìŠ¤í…œ êµ¬ì¶•
- [ ] ê¸°ë³¸ í”„ë¡œí•„ ì„¤ì •
- [ ] í…Œë§ˆ ì‹œìŠ¤í…œ êµ¬ì¶• (ë¼ì´íŠ¸/ë‹¤í¬/ì‹œìŠ¤í…œ)
- [ ] í™ˆ í™”ë©´ ì¹´í˜ì¸ ì¶”ì 
- [ ] ê³„ì¸µì  ì¹´í˜ì¸ ì„ íƒ ì‹œìŠ¤í…œ (ì¹´í…Œê³ ë¦¬ â†’ ë¸Œëœë“œ â†’ ìŒë£Œ â†’ ì‚¬ì´ì¦ˆ)
- [ ] ì´ˆê¸° ì¹´í˜ì¸ ì•„ì´í…œ ë°ì´í„° ì…ë ¥

### Phase 2: í•µì‹¬ ê¸°ëŠ¥

- [ ] ì¹´í˜ì¸ ë¶„í•´ ì‹œìŠ¤í…œ êµ¬í˜„
- [ ] í”„ë¡œê·¸ë˜ìŠ¤ ë°” ì• ë‹ˆë©”ì´ì…˜ (í…Œë§ˆë³„)
- [ ] ê³„ì¸µì  ë²„íŠ¼ UI ì™„ì„± ë° ìµœì í™”
- [ ] ì„­ì·¨ ê¸°ë¡ í™”ë©´
- [ ] ì˜¤í”„ë¼ì¸ ì§€ì› (AsyncStorage ìºì‹œ í™œìš©)
- [ ] ë°±ê·¸ë¼ìš´ë“œ ë™ê¸°í™”

### Phase 3: ê³ ê¸‰ ê¸°ëŠ¥

- [ ] ì°¨íŠ¸ ë° í†µê³„ (í…Œë§ˆ ì ìš©)
- [ ] ì•Œë¦¼ ì‹œìŠ¤í…œ
- [ ] í…Œë§ˆ ì „í™˜ ì• ë‹ˆë©”ì´ì…˜
- [ ] ì¶”ê°€ ë¸Œëœë“œ ë° ìŒë£Œ í™•ì¥
- [ ] ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§
- [ ] ë°ì´í„° ë‚´ë³´ë‚´ê¸°

## 12. ê³ ë ¤ì‚¬í•­

### 12.1 ì„±ëŠ¥ ìµœì í™”

- ì¹´í˜ì¸ ê³„ì‚°ì„ ìœ„í•œ ë°±ê·¸ë¼ìš´ë“œ ì‘ì—… ìŠ¤ì¼€ì¤„ë§
- AsyncStorage ê¸°ë°˜ ê°„ë‹¨í•œ ìºì‹± ì‹œìŠ¤í…œ
- React.memoë¥¼ í™œìš©í•œ ì»´í¬ë„ŒíŠ¸ ìµœì í™”
- useMemo/useCallbackìœ¼ë¡œ ê³„ì‚° ë¹„ìš© ìµœì í™”
- ê³„ì¸µì  ë²„íŠ¼ ì„ íƒ ì‹œ ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§ ë°©ì§€

### 12.2 ë³´ì•ˆ

- Expo SecureStoreë¡œ ë¯¼ê°í•œ ë°ì´í„° ì•”í˜¸í™”
- í™˜ê²½ë³€ìˆ˜ë¡œ API í‚¤ ê´€ë¦¬
- Supabase RLS (Row Level Security) ì ìš©
- í† í° ìë™ ê°±ì‹  ë° ì•ˆì „í•œ ì €ì¥

### 12.3 ì‚¬ìš©ì ê²½í—˜

- ì˜¤í”„ë¼ì¸ ëª¨ë“œ ì§€ì› (AsyncStorage ìºì‹œ í™œìš©)
- ê³„ì¸µì  ì„ íƒ ì‹œ ë¶€ë“œëŸ¬ìš´ ì• ë‹ˆë©”ì´ì…˜
- ì ‘ê·¼ì„± (Accessibility) ì¤€ìˆ˜
- ë‹¤êµ­ì–´ ì§€ì› ì¤€ë¹„
- ì‹œìŠ¤í…œ í…Œë§ˆ ë³€ê²½ ì‹œ ì¦‰ì‹œ ë°˜ì˜
- ë‹¤í¬ëª¨ë“œì—ì„œì˜ ê°€ë…ì„± ìµœì í™”

### 12.4 ê³„ì¸µì  ì„ íƒ ì‹œìŠ¤í…œ

- ì¹´í…Œê³ ë¦¬ë³„ ì•„ì´ì½˜ ë° ìƒ‰ìƒ ì¼ê´€ì„±
- ì„ íƒ ìƒíƒœì˜ ëª…í™•í•œ ì‹œê°ì  í”¼ë“œë°±
- ì´ì „ ë‹¨ê³„ë¡œ ëŒì•„ê°€ê¸° ê¸°ëŠ¥
- ê° ë‹¨ê³„ë³„ ì ì ˆí•œ ì• ë‹ˆë©”ì´ì…˜
- ì—ë„ˆì§€ ë“œë§í¬ëŠ” ì‚¬ì´ì¦ˆ ì„ íƒ ìƒëµ ë¡œì§

### 12.5 ë°ì´í„° ì •í™•ì„±

- ë¸Œëœë“œë³„ ì¹´í˜ì¸ í•¨ëŸ‰ ë°ì´í„°ì˜ ì‹ ë¢°ì„±
- ì‚¬ìš©ì ì…ë ¥ ë°ì´í„° ê²€ì¦
- ì˜ë£Œì  ì¡°ì–¸ì´ ì•„ë‹˜ì„ ëª…ì‹œ
- ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ ì‹œ ìºì‹œëœ ë°ì´í„° í™œìš©

ì´ ì„¤ê³„ ë¬¸ì„œë¥¼ ë°”íƒ•ìœ¼ë¡œ ë‹¨ê³„ë³„ë¡œ ê°œë°œì„ ì§„í–‰í•˜ì‹œë©´ ë©ë‹ˆë‹¤.

**ğŸ” ë³´ì•ˆ ìš°ì„ **: í™˜ê²½ë³€ìˆ˜ì™€ SecureStoreë¥¼ í†µí•œ ì•”í˜¸í™” ì²˜ë¦¬ë¡œ ì‹œì‘
**âš¡ ë‹¨ìˆœí•œ ì„±ëŠ¥**: AsyncStorage ê¸°ë°˜ ìºì‹±ìœ¼ë¡œ ê°„ë‹¨í•˜ë©´ì„œë„ íš¨ìœ¨ì ì¸ ì‹œìŠ¤í…œ  
**ğŸ¨ í…Œë§ˆ ì‹œìŠ¤í…œ**: ì´ˆê¸° ë‹¨ê³„ì— êµ¬ì¶•í•˜ì—¬ ëª¨ë“  ì»´í¬ë„ŒíŠ¸ê°€ ë‹¤í¬ëª¨ë“œë¥¼ ì§€ì›
**ğŸ“± ì§ê´€ì  UI**: ê³„ì¸µì  ë²„íŠ¼ ì„ íƒìœ¼ë¡œ í˜ì´ì§€ ì´ë™ ì—†ëŠ” ë¶€ë“œëŸ¬ìš´ ì‚¬ìš©ì ê²½í—˜

**ğŸ—‚ï¸ ê³„ì¸µì  ì„ íƒ íë¦„:**

```
ì¹´í…Œê³ ë¦¬ ì„ íƒ (ì»¤í”¼/ì—ë„ˆì§€ ë“œë§í¬)
    â†“
ë¸Œëœë“œ ì„ íƒ (ìŠ¤íƒ€ë²…ìŠ¤, ë©”ê°€, ì»´í¬ì¦ˆ, ë¹½ë‹¤ë°© / ëª¬ìŠ¤í„°, ë ˆë“œë¶ˆ, í•«ì‹ìŠ¤)
    â†“
ìŒë£Œ ì„ íƒ (ì•„ì•„, ë¼ë–¼ / ê° ë¸Œëœë“œë³„ 3ì¢…)
    â†“
ì‚¬ì´ì¦ˆ ì„ íƒ (ì»¤í”¼ë§Œ: S/M/L)
```
