# 25.07.29 이슈 정리

Expo TypeScript + NativeWindCSS 환경 구축 과정에서 발생한 이슈들과 해결 방법을 정리한 문서

## 📦 설치해야 할 라이브러리

### 핵심 라이브러리

```bash
# Supabase
npm install @supabase/supabase-js

# 상태 관리 및 데이터 패칭
npm install @tanstack/react-query

# 로컬 저장소
npm install @react-native-async-storage/async-storage

# 폼 관리
npm install react-hook-form
```

### Expo 확장 라이브러리

```bash
# 보안 저장소
npx expo install expo-secure-store

# 시스템 UI
npx expo install expo-system-ui

# 네트워크 상태 확인
npx expo install @react-native-community/netinfo

# React Navigation 의존성
npx expo install react-native-screens react-native-safe-area-context

# 아이콘
npx expo install @expo/vector-icons
```

### 네비게이션

```bash
# React Navigation
npm install @react-navigation/native @react-navigation/bottom-tabs @react-navigation/stack
```

### 스타일링 및 개발 도구

```bash
# NativeWindCSS
npm install nativewind
npm install --save-dev tailwindcss

# TypeScript 관련
npm install --save-dev @types/react @types/react-native @types/node
```

### 설정 초기화

```bash
# Tailwind 설정 파일 생성
npx tailwindcss init

# 환경변수 파일 생성 (Windows)
echo. > .env
```

> **💡 팁**: `npx expo install ~~` 명령어를 사용하면 현재 Expo SDK 버전에 맞는 라이브러리를 자동으로 설치해준다.

## 🚨 발생한 이슈들과 해결 방법

### 이슈 1: Path 설정 문제

**문제**: 설정 파일들의 경로가 프로젝트 구조와 맞지 않아 발생하는 오류

**해결 방법**:

- `tailwind.config.js`, `global.css`, `babel.config.js`, `metro.config.js` 파일들의 경로를 프로젝트에 맞게 수정
- 각 설정 파일에서 참조하는 파일 경로들을 실제 프로젝트 구조에 맞게 조정

### 이슈 2: VS Code에서 Tailwind CSS 문법 인식 불가

**증상**:

- `@tailwind`, `@apply` 등의 Tailwind CSS 문법에 "Unknown at rule" 경고 표시
- 자동완성 및 IntelliSense 기능 동작하지 않음

**해결 방법**:

1. `.vscode/settings.json` 파일 생성:

```json
{
  "css.validate": false,
  "scss.validate": false,
  "less.validate": false,
  "css.lint.unknownAtRules": "ignore",
  "scss.lint.unknownAtRules": "ignore",
  "files.associations": {
    "*.css": "tailwindcss"
  },
  "editor.quickSuggestions": {
    "strings": true
  },
  "tailwindCSS.includeLanguages": {
    "typescript": "javascript",
    "typescriptreact": "javascript"
  },
  "tailwindCSS.experimental.classRegex": ["className={([^}]*)}"]
}
```

2. VS Code 확장 프로그램 설치:

   - **Tailwind CSS IntelliSense** (bradlc.vscode-tailwindcss)
   - **PostCSS Language Support** (csstools.postcss)

3. VS Code 재시작

### 이슈 3: TypeScript에서 className 속성 인식 불가

**증상**:

```
Type '{ children: Element; className: string; }' is not assignable to type 'IntrinsicAttributes & IntrinsicClassAttributes<View> & Readonly<ViewProps>'.
Property 'className' does not exist on type...
```

**원인**: NativeWind가 제대로 설정되지 않아 TypeScript가 `className` 속성을 인식하지 못함

### 이슈 4: ES Module Scope 오류 (핵심 문제)

**증상**:

```
Web Bundling failed 628ms index.ts (1 module)
ERROR  index.ts: module is not defined in ES module scope
```

**추가 오류**:

- `.plugins is not a valid Plugin property`
- `[Reanimated] Seems like you are using a Babel plugin react-native-reanimated/plugin`

**원인**:

- 과거 버전의 NativeWind 설정 방법 사용
- 의존성 버전 불일치 문제

**해결 방법**:

1. **올바른 `babel.config.js` 설정**:

```javascript
module.exports = function (api) {
  api.cache(true);
  return {
    presets: [['babel-preset-expo', { jsxImportSource: 'nativewind' }]],
    plugins: ['nativewind/babel', 'react-native-worklets/plugin'],
  };
};
```

2. **의존성 및 캐시 클리어**:

```bash
# node_modules 및 package-lock.json 삭제
rm -rf node_modules package-lock.json

# 의존성 재설치
npm install

# Expo 캐시 클리어 후 실행
npx expo start -c
```

## 📚 참고 자료

- [NativeWind 공식 설치 가이드](https://www.nativewind.dev/docs/getting-started/installation)
- [관련 GitHub 이슈](https://github.com/nativewind/nativewind/issues/600#issuecomment-1804741121)

## 💡 교훈

1. **공식 문서 우선**: AI 도구들이 과거 버전의 설정을 제공할 수 있으므로, 항상 공식 문서를 먼저 확인
2. **버전 호환성**: 라이브러리 간 버전 호환성 문제가 자주 발생하므로, 최신 가이드 참조 필요
3. **캐시 클리어**: 설정 변경 시 반드시 캐시를 클리어하고 재시작
4. **단계별 디버깅**: 문제 발생 시 한 번에 모든 설정을 바꾸지 말고 단계별로 확인
